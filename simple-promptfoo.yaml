description: "TDS Virtual TA - Simplified Evaluation"

prompts:
  - "API Test" # Dummy prompt since we're testing an API directly

providers:
  - id: api-test
    config:
      url: http://127.0.0.1:8000/api/
      method: POST
      headers:
        Content-Type: application/json

tests:
  - vars:
      question: "The question asks to use gpt-3.5-turbo-0125 model but the ai-proxy provided by Anand sir only supports gpt-4o-mini. So should we just use gpt-4o-mini or use the OpenAI API for gpt3.5 turbo?"
    options:
      postprocess: |
        const response = await fetch('http://127.0.0.1:8000/api/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: context.vars.question })
        });
        return await response.json();
    assert:
      - type: contains
        value: "gpt-3.5-turbo-0125"
      - type: contains  
        value: "OpenAI API"
      - type: is-json

  - vars:
      question: "If a student scores 10/10 on GA4 as well as a bonus, how would it appear on the dashboard?"
    options:
      postprocess: |
        const response = await fetch('http://127.0.0.1:8000/api/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: context.vars.question })
        });
        return await response.json();
    assert:
      - type: contains
        value: "110"
      - type: is-json

  - vars:
      question: "I know Docker but have not used Podman before. Should I use Docker for this course?"
    options:
      postprocess: |
        const response = await fetch('http://127.0.0.1:8000/api/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: context.vars.question })
        });
        return await response.json();
    assert:
      - type: contains
        value: "Podman"
      - type: contains
        value: "Docker"
      - type: is-json

  - vars:
      question: "When is the TDS Sep 2025 end-term exam?"
    options:
      postprocess: |
        const response = await fetch('http://127.0.0.1:8000/api/', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ question: context.vars.question })
        });
        return await response.json();
    assert:
      - type: contains
        value: "don't know"
      - type: is-json
